author: Mohammad Rahmani
created: 20200303065408602
description: Search multiple wikis
list: readme license history
modified: 20200303194414900
plugin-type: plugin
source: https://github.com/kookma/TW-Searchwikis
title: $:/plugins/kookma/searchwikis
type: application/json
version: 1.1.0

{"tiddlers":{"$:/plugins/kookma/searchwikis/history":{"title":"$:/plugins/kookma/searchwikis/history","created":"20200303065501531","modified":"20200303195140486","type":"text/vnd.tiddlywiki","text":"!! Revision 1.1.0\n* Date: [3rd Mar 2020]\n* [FIXED] typo in documentation\n* [FIXED] temporary tiddlers are system tiddlers now\n* [FIXED] all global macros removed\n\n!! Revision 1.0.0\n* Date: [3rd Mar 2020]\n* [NEW] new index and search mechanism\n* [NEW] search multiple indexes at the same time\n* [NEW] added interface to $:/AdvancedSearch\n* [NEW] added documentation and examples\n\n!! Revision 0.5\n* Date: [1st Feb 2020]\n* First release on kookma.searchwikis.tiddlyspot.com"},"$:/plugins/kookma/searchwikis/license":{"title":"$:/plugins/kookma/searchwikis/license","created":"20181101134530634","modified":"20200303071252983","type":"application/x-tiddler","text":"Distributed under an MIT license.\n\nCopyright (c) 2020 [[Mohammad Rahmani|https://github.com/kookma]]\n\n<<<\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n<<<\n"},"$:/plugins/kookma/searchwikis/macros/searchindex":{"title":"$:/plugins/kookma/searchwikis/macros/searchindex","created":"20200303071014382","modified":"20200303194719281","type":"text/vnd.tiddlywiki","text":"\\define searchIndex(searchTerm)\n\\rules except wikilink\n<$list filter=\"[all[tiddlers+shadows]prefix[$:/stw/index/]has[stw_wiki_title]]\" variable=dataTid  emptyMessage=\"//There is no index tiddler//\">\n<$vars wikiUrl={{{ [<dataTid>get[stw_wiki_url]] }}} wikiTitle={{{ [<dataTid>get[stw_wiki_title]] }}}>\n<div style=\"margin-bottom:15px\">\n--- Search in: <a href=<<wikiUrl>> target=\"_blank\">''<$text text=<<wikiTitle>>/>''</a><br>\n<$list filter=\"[<dataTid>indexes[]]\" variable=idx>\n<$list filter=\"[<dataTid>getindex<idx>search:title[$searchTerm$]]\" variable=result>\n<$vars inTitle={{{[<result>split[|]nth[1]]}}}\n       inCaption={{{[<result>split[|]nth[2]]}}}\n  \t   inTags={{{[<result>split[|]nth[3]]}}} >\n<$wikify name=targetUrl text={{{[<wikiUrl>addsuffix[#]addsuffix<idx>]}}}>             \n<a href=<<targetUrl>> target=\"_blank\"><$text text=<<inTitle>> /></a><br>\n</$wikify>\n<div style=\"font-size:small;\">\n<$list filter=\"[<inCaption>!is[blank]]\" variable=ignore>\nCaption: <$text text=<<inCaption>>/>&nbsp;\n</$list>\n<$list filter=\"[<inTags>!is[blank]]\" variable=ignore>\nTags: <$list filter=\"[enlist<inTags>]\" variable=tagItem>\n__<$text text=<<tagItem>> />__ </$list>\n</$list>\n</div>\n</$vars>\n</$list>\n</$list>\n</div>\n</$vars>\n</$list>\n\\end"},"$:/plugins/kookma/searchwikis/macros/searchresult":{"title":"$:/plugins/kookma/searchwikis/macros/searchresult","created":"20200303160932478","modified":"20200303194946862","type":"text/vnd.tiddlywiki","text":"<!-- display results -->\n<$macrocall $name=\"searchIndex\" searchTerm={{{[<tmpsearchTerm>get[text]]}}} />"},"$:/plugins/kookma/searchwikis/readme":{"title":"$:/plugins/kookma/searchwikis/readme","created":"20200303065501532","modified":"20200303194052725","type":"text/vnd.tiddlywiki","text":"!! What is Searchwikis plugin?\n<<<\nSearchwikis plugin uses index (dataTiddler) to search external Tiddlywikis. It has two parts\n\n# An indexer, to build an index of all tiddlers in an external wiki\n# A search tool to search indexes and display a link to external wiki\n\nThen one central wiki can hosts many index tiddlers and lets to search several external wikis through index tiddlers.\n<<<\n\n\n!! How to use\n<<<\n* install $:/plugins/kookma/searchwikis into the host wiki\n* drag and drop [[index and export|$:/plugins/kookma/searchwikis/ui/index-export]] tiddler to the external wiki\n* use the ui and create the index tiddler of external wiki\n* export it to the host wiki, or drag and drop to the host wiki\n* open [[$:/AdvancedSearch]] in the host wiki\n* goto `External wiki` tab and make search\n* results will be shown as links and one can click a link and open the external wiki with that result under focus\n<<<\n\n!! Install\n<<<\n;Packaged plugin\n#Drag and drop $:/plugins/kookma/searchwikis into your wiki\n#Save and reload your wiki\n\n;Client-Server installation (separate files)\n*For Node.js (server version) download the searchwikis folder from [[source|https://github.com/kookma/TW-Searchwikis]] folder and paste in your Tiddlywiki plugins folder\n*For local installation put the searchwikis folder into your local plugins folder under your wiki folder\n\n;Code and demo\n* Demo: https://kookma.github.io/TW-Searchwikis/\n* Code: https://github.com/kookma/TW-Searchwikis\n\nFor complete tutorial, examples and use cases, see the demo page.\n\n//It is highly recommended to backup your data before trying any new plugin! Do it before installing Searchwikis//\n<<<"},"$:/plugins/kookma/searchwikis/ui/advancedsearch":{"title":"$:/plugins/kookma/searchwikis/ui/advancedsearch","caption":"External wikis","created":"20200303134648969","modified":"20200303195039290","tags":"$:/tags/AdvancedSearch","type":"text/vnd.tiddlywiki","text":"\\import $:/plugins/kookma/searchwikis/macros/searchindex\n\\define tmpsearchTerm() $:/temp/stw/searchterm\n\nSearch external wikis through index tiddlers\n\n<div class=\"tc-search\">\n<$edit-text tiddler=<<tmpsearchTerm>> tag=\"input\" type=\"search\" focus={{$:/config/Search/AutoFocus}} default=\"\"/>\n<$reveal state=<<tmpsearchTerm>> type=\"nomatch\" text=\"\">\n<$button class=\"tc-btn-invisible\">\n<$action-setfield $tiddler=<<tmpsearchTerm>> $field=\"text\" $value=\"\"/>\n{{$:/core/images/close-button}}\n</$button>\n</$reveal>\n</div>\n\n\n<$reveal state=<<tmpsearchTerm>> type=\"nomatch\" text=\"\">\n<$list filter=\"[<tmpsearchTerm>get[text]minlength{$:/config/Search/MinLength}limit[1]]\" emptyMessage=\"\"\"<div class=\"tc-search-results\">{{$:/language/Search/Search/TooShort}}</div>\"\"\" >\n<$transclude tiddler=\"$:/plugins/kookma/searchwikis/macros/searchresult\" field=\"text\"/>\n</$list>\n\n</$reveal>\n\n"},"$:/plugins/kookma/searchwikis/ui/index-export":{"title":"$:/plugins/kookma/searchwikis/ui/index-export","created":"20200303165959003","modified":"20200303194551113","tags":"","type":"text/vnd.tiddlywiki","text":"\\define tempTidInputs()   $:/temp/searchwiki/input\n\\define indexTitle()      $:/stw/index/{{$(tempTidInputs)$##wikiTitle}}\n\n\\define indexvalue() $(title)$|$(caption)$|$(tags)$\n\n\\define index-all-tiddlers()\n<!-- this macro will inedex all tiddlers in the wiki -->\n<$list filter=\"[all[tiddlers]!is[system]]\">\n<$vars title={{!!title}} caption={{!!caption}} tags={{!!tags}} >\n<$action-setfield $tiddler=<<indextitle>> $index=<<currentTiddler>> $value=<<indexvalue>>/>\n</$vars>\n</$list>\n\\end\n\n\\define add-wiki-info()\n<!-- add the source wiki info to index file through dedicated fields -->\n<$action-setfield $tiddler=<<indextitle>> $field=\"stw_wiki_title\"  $value={{{[<tempTidInputs>getindex[wikiTitle]]}}}/>\n<$action-setfield $tiddler=<<indextitle>> $field=\"stw_wiki_url\"    $value={{{[<tempTidInputs>getindex[wikiUrl]]  }}} />\n<$action-setfield $tiddler=<<indextitle>> $field=\"stw_last_update\" $value=<<now \"mmm DDth, YYYY 0hh:0mm:0ss\">> />\n\\end\n\n\n\\define display-summary()\n<div class=\"kk-stw-indent\">\n<$list filter=\"[all[shadows+tiddlers]prefix[$:/stw/index/]]\" emptyMessage=\"//No index tiddler existed//\">\n{{||$:/core/ui/Buttons/delete}}&nbsp;\n{{||$:/core/ui/Buttons/export-tiddler}}&nbsp;\n<$link/> <$text text={{{[<currentTiddler>get[stw_last_update]]  }}}/><br>\n</$list>\n</div>\n\\end\n\n\\define index-ui()\n<label class=\"kk-stw-lbl\">Wiki title </label>\n<$edit-text tiddler=<<tempTidInputs>> index=\"wikiTitle\" tag=input default=\"\" placeholder={{$:/SiteTitle}} class=\"kk-stw-txtbox\"/><br>\n\n<label class=\"kk-stw-lbl\">Wiki url </label>\n<$edit-text tiddler=<<tempTidInputs>> index=\"wikiUrl\" tag=input default=\"\" placeholder=\"\" class=\"kk-stw-txtbox\"/><br>\n\n<!-- Make index tiddler-->\n<$wikify name=indextitle text=<<indexTitle>> >\n<span class=\"kk-stw-lbl\"/>\n<$button>Make Index\n<$list filter=\"[<tempTidInputs>getindex[wikiTitle]!is[blank]]\" variable=ignore>\n<<index-all-tiddlers>>\n<<add-wiki-info>>\n</$list>\n</$button>\n<<display-export-button>>\n<<display-summary>>\n</$wikify>\n\\end\n\n\n<style>\n.kk-stw-lbl {display:inline-block; width:60px;}\n.kk-stw-txtbox {display:inline-block; width:40ch;}\n.kk-stw-indent{padding-left:60px; margin-top:1em;font-size:small;}\n</style>\n\n\n<<index-ui>>\n"}}}